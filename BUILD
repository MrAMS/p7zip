load("@rules_cc//cc:defs.bzl", "cc_library", "cc_binary")

_7zip_defines = [
  "ENV_UNIX",
  "UNICODE",
  "_UNICODE",
  "UNIX_USE_WIN_FILE",
  "NDEBUG",
  "_LARGEFILE_SOURCE",
  "_FILE_OFFSET_BITS=64",
]

C_HDRS = [
    "C/Sha512.h",
    "C/LzFindMt.h",
    "C/7zAlloc.h",
    "C/7z.h",
    "C/7zVersion.h",
    "C/XzEnc.h",
    "C/LzmaEnc.h",
    "C/LzmaDec.h",
    "C/Threads.h",
    "C/XzCrc64.h",
    "C/Precomp.h",
    "C/ZstdDec.h",
    "C/Blake2.h",
    "C/Lzma86.h",
    "C/Bcj2.h",
    "C/Xxh64.h",
    "C/Lzma2Enc.h",
    "C/LzFind.h",
    "C/Sha3.h",
    "C/LzHash.h",
    "C/Bra.h",
    "C/Xz.h",
    "C/Aes.h",
    "C/Delta.h",
    "C/HuffEnc.h",
    "C/BwtSort.h",
    "C/Sort.h",
    "C/7zCrc.h",
    "C/DllSecur.h",
    "C/RotateDefs.h",
    "C/LzmaLib.h",
    "C/7zBuf.h",
    "C/Md5.h",
    "C/Ppmd.h",
    "C/Compiler.h",
    "C/MtCoder.h",
    "C/Lzma2Dec.h",
    "C/Sha1.h",
    "C/CpuArch.h",
    "C/MtDec.h",
    "C/Ppmd7.h",
    "C/Ppmd8.h",
    "C/Alloc.h",
    "C/7zTypes.h",
    "C/Sha256.h",
    "C/Lzma2DecMt.h",
    "C/7zFile.h",
    "C/SwapBytes.h",
]

C_SRCS = [
    "C/Lzma2DecMt.c",
    "C/Xz.c",
    "C/LzFindOpt.c",
    "C/LzmaLib.c",
    "C/XzEnc.c",
    "C/Md5.c",
    "C/Sha512Opt.c",
    "C/LzmaDec.c",
    "C/Ppmd7Enc.c",
    "C/XzDec.c",
    "C/Lzma2Enc.c",
    "C/XzCrc64Opt.c",
    "C/Sha256Opt.c",
    "C/Ppmd7Dec.c",
    "C/Aes.c",
    "C/HuffEnc.c",
    "C/SwapBytes.c",
    "C/7zBuf2.c",
    "C/Lzma2Dec.c",
    "C/Ppmd8Dec.c",
    "C/BwtSort.c",
    "C/Sha1Opt.c",
    "C/ZstdDec.c",
    "C/Lzma86Dec.c",
    "C/7zArcIn.c",
    "C/Threads.c",
    "C/7zBuf.c",
    "C/MtCoder.c",
    "C/Bcj2.c",
    "C/Sha256.c",
    "C/7zCrcOpt.c",
    "C/Ppmd7aDec.c",
    "C/7zCrc.c",
    "C/Bra86.c",
    "C/Ppmd8.c",
    "C/Blake2s.c",
    "C/Lzma86Enc.c",
    "C/Xxh64.c",
    "C/Ppmd8Enc.c",
    "C/Delta.c",
    "C/LzFind.c",
    "C/BraIA64.c",
    "C/XzCrc64.c",
    "C/7zDec.c",
    "C/AesOpt.c",
    "C/Alloc.c",
    "C/LzFindMt.c",
    "C/CpuArch.c",
    "C/DllSecur.c",
    "C/XzIn.c",
    "C/LzmaEnc.c",
    "C/7zStream.c",
    "C/Sha512.c",
    "C/7zAlloc.c",
    "C/Sha3.c",
    "C/Bcj2Enc.c",
    "C/MtDec.c",
    "C/Ppmd7.c",
    "C/Bra.c",
    "C/Sort.c",
    "C/7zFile.c",
    "C/Sha1.c",
]

CPP_COMMON_SRCS = [
    "CPP/Common/Sha256Reg.cpp",
    "CPP/Common/Sha3Reg.cpp",
    "CPP/Common/Sha512Reg.cpp",
    "CPP/Common/StringToInt.cpp",
    "CPP/Common/CRC.cpp",
    "CPP/Common/StdOutStream.cpp",
    "CPP/Common/CrcReg.cpp",
    "CPP/Common/Random.cpp",
    "CPP/Common/MyMap.cpp",
    "CPP/Common/C_FileIO.cpp",
    "CPP/Common/XzCrc64Reg.cpp",
    "CPP/Common/CksumReg.cpp",
    "CPP/Common/Sha1Prepare.cpp",
    "CPP/Common/XzCrc64Init.cpp",
    "CPP/Common/Wildcard.cpp",
    "CPP/Common/TextConfig.cpp",
    "CPP/Common/CommandLineParser.cpp",
    "CPP/Common/MyString.cpp",
    "CPP/Common/Sha256Prepare.cpp",
    "CPP/Common/Md5Reg.cpp",
    "CPP/Common/UTFConvert.cpp",
    "CPP/Common/ListFileUtils.cpp",
    "CPP/Common/MyVector.cpp",
    "CPP/Common/MyXml.cpp",
    "CPP/Common/Sha512Prepare.cpp",
    "CPP/Common/Lang.cpp",
    "CPP/Common/StringConvert.cpp",
    "CPP/Common/NewHandler.cpp",
    "CPP/Common/Xxh64Reg.cpp",
    "CPP/Common/DynLimBuf.cpp",
    "CPP/Common/LzFindPrepare.cpp",
    "CPP/Common/Sha1Reg.cpp",
    "CPP/Common/IntToString.cpp",
    "CPP/Common/StdInStream.cpp",
    "CPP/Common/MyWindows.cpp",
]

CPP_COMMON_HDRS = [
    "CPP/Common/Lang.h",
    "CPP/Common/NewHandler.h",
    "CPP/Common/UTFConvert.h",
    "CPP/Common/DynLimBuf.h",
    "CPP/Common/StdInStream.h",
    "CPP/Common/ComTry.h",
    "CPP/Common/Wildcard.h",
    "CPP/Common/MyXml.h",
    "CPP/Common/Common0.h",
    "CPP/Common/StringToInt.h",
    "CPP/Common/TextConfig.h",
    "CPP/Common/C_FileIO.h",
    "CPP/Common/MyCom.h",
    "CPP/Common/MyVector.h",
    "CPP/Common/StringConvert.h",
    "CPP/Common/AutoPtr.h",
    "CPP/Common/MyUnknown.h",
    "CPP/Common/Random.h",
    "CPP/Common/MyException.h",
    "CPP/Common/MyTypes.h",
    "CPP/Common/StdOutStream.h",
    "CPP/Common/IntToString.h",
    "CPP/Common/CommandLineParser.h",
    "CPP/Common/MyLinux.h",
    "CPP/Common/ListFileUtils.h",
    "CPP/Common/MyInitGuid.h",
    "CPP/Common/Common.h",
    "CPP/Common/MyMap.h",
    "CPP/Common/MyBuffer2.h",
    "CPP/Common/DynamicBuffer.h",
    "CPP/Common/MyGuidDef.h",
    "CPP/Common/MyBuffer.h",
    "CPP/Common/Defs.h",
    "CPP/Common/MyString.h",
    "CPP/Common/StdAfx.h",
    "CPP/Common/MyWindows.h",
]

CPP_7ZIP_SRCS = [
    "CPP/7zip/Common/OutBuffer.cpp",
    "CPP/7zip/Common/StreamUtils.cpp",
    "CPP/7zip/Common/InOutTempBuffer.cpp",
    "CPP/7zip/Common/UniqBlocks.cpp",
    "CPP/7zip/Common/LimitedStreams.cpp",
    "CPP/7zip/Common/MethodProps.cpp",
    "CPP/7zip/Common/StreamBinder.cpp",
    "CPP/7zip/Common/LockedStream.cpp",
    "CPP/7zip/Common/MultiOutStream.cpp",
    "CPP/7zip/Common/CreateCoder.cpp",
    "CPP/7zip/Common/CWrappers.cpp",
    "CPP/7zip/Common/FileStreams.cpp",
    "CPP/7zip/Common/InBuffer.cpp",
    "CPP/7zip/Common/VirtThread.cpp",
    "CPP/7zip/Common/PropId.cpp",
    "CPP/7zip/Common/StreamObjects.cpp",
    "CPP/7zip/Common/ProgressMt.cpp",
    "CPP/7zip/Common/OffsetStream.cpp",
    "CPP/7zip/Common/ProgressUtils.cpp",
    "CPP/7zip/Common/OutMemStream.cpp",
    "CPP/7zip/Common/FilterCoder.cpp",
    "CPP/7zip/Common/MethodId.cpp",
    "CPP/7zip/Common/FilePathAutoRename.cpp",
    "CPP/7zip/Common/MemBlocks.cpp",
    "CPP/7zip/Crypto/MyAesReg.cpp",
    "CPP/7zip/Crypto/HmacSha256.cpp",
    "CPP/7zip/Crypto/7zAesRegister.cpp",
    "CPP/7zip/Crypto/HmacSha1.cpp",
    "CPP/7zip/Crypto/RarAes.cpp",
    "CPP/7zip/Crypto/7zAes.cpp",
    "CPP/7zip/Crypto/Rar5Aes.cpp",
    "CPP/7zip/Crypto/MyAes.cpp",
    "CPP/7zip/Crypto/ZipStrong.cpp",
    "CPP/7zip/Crypto/RandGen.cpp",
    "CPP/7zip/Crypto/Pbkdf2HmacSha1.cpp",
    "CPP/7zip/Crypto/WzAes.cpp",
    "CPP/7zip/Crypto/ZipCrypto.cpp",
    "CPP/7zip/Crypto/Rar20Crypto.cpp",
    "CPP/7zip/Archive/7z/7zDecode.cpp",
    "CPP/7zip/Archive/7z/7zRegister.cpp",
    "CPP/7zip/Archive/7z/7zOut.cpp",
    "CPP/7zip/Archive/7z/7zEncode.cpp",
    "CPP/7zip/Archive/7z/7zExtract.cpp",
    "CPP/7zip/Archive/7z/7zCompressionMode.cpp",
    "CPP/7zip/Archive/7z/7zHeader.cpp",
    "CPP/7zip/Archive/7z/7zProperties.cpp",
    "CPP/7zip/Archive/7z/7zHandlerOut.cpp",
    "CPP/7zip/Archive/7z/7zIn.cpp",
    "CPP/7zip/Archive/7z/7zSpecStream.cpp",
    "CPP/7zip/Archive/7z/7zFolderInStream.cpp",
    "CPP/7zip/Archive/7z/7zUpdate.cpp",
    "CPP/7zip/Archive/7z/7zHandler.cpp",
    "CPP/7zip/Archive/7z/StdAfx.cpp",
    "CPP/7zip/Archive/ExtHandler.cpp",
    "CPP/7zip/Archive/ArjHandler.cpp",
    "CPP/7zip/Archive/MubHandler.cpp",
    "CPP/7zip/Archive/ElfHandler.cpp",
    "CPP/7zip/Archive/PeHandler.cpp",
    "CPP/7zip/Archive/ApfsHandler.cpp",
    "CPP/7zip/Archive/SquashfsHandler.cpp",
    "CPP/7zip/Archive/HandlerCont.cpp",
    "CPP/7zip/Archive/LvmHandler.cpp",
    "CPP/7zip/Archive/Common/InStreamWithCRC.cpp",
    "CPP/7zip/Archive/Common/ParseProperties.cpp",
    "CPP/7zip/Archive/Common/ItemNameUtils.cpp",
    "CPP/7zip/Archive/Common/MultiStream.cpp",
    "CPP/7zip/Archive/Common/DummyOutStream.cpp",
    "CPP/7zip/Archive/Common/OutStreamWithSha1.cpp",
    "CPP/7zip/Archive/Common/CoderMixer2.cpp",
    "CPP/7zip/Archive/Common/HandlerOut.cpp",
    "CPP/7zip/Archive/Common/OutStreamWithCRC.cpp",
    "CPP/7zip/Archive/Common/FindSignature.cpp",
    "CPP/7zip/Archive/ZstdHandler.cpp",
    "CPP/7zip/Archive/PpmdHandler.cpp",
    "CPP/7zip/Archive/UefiHandler.cpp",
    "CPP/7zip/Archive/Zip/ZipRegister.cpp",
    "CPP/7zip/Archive/Zip/ZipHandler.cpp",
    "CPP/7zip/Archive/Zip/ZipAddCommon.cpp",
    "CPP/7zip/Archive/Zip/ZipIn.cpp",
    "CPP/7zip/Archive/Zip/ZipItem.cpp",
    "CPP/7zip/Archive/Zip/ZipUpdate.cpp",
    "CPP/7zip/Archive/Zip/ZipOut.cpp",
    "CPP/7zip/Archive/Zip/ZipHandlerOut.cpp",
    "CPP/7zip/Archive/Chm/ChmHandler.cpp",
    "CPP/7zip/Archive/Chm/ChmIn.cpp",
    "CPP/7zip/Archive/ApmHandler.cpp",
    "CPP/7zip/Archive/DmgHandler.cpp",
    "CPP/7zip/Archive/MslzHandler.cpp",
    "CPP/7zip/Archive/Rar/Rar5Handler.cpp",
    "CPP/7zip/Archive/Rar/RarHandler.cpp",
    "CPP/7zip/Archive/Rar/StdAfx.cpp",
    "CPP/7zip/Archive/RpmHandler.cpp",
    "CPP/7zip/Archive/SplitHandler.cpp",
    "CPP/7zip/Archive/AvbHandler.cpp",
    "CPP/7zip/Archive/LzmaHandler.cpp",
    "CPP/7zip/Archive/FlvHandler.cpp",
    "CPP/7zip/Archive/IhexHandler.cpp",
    "CPP/7zip/Archive/ArHandler.cpp",
    "CPP/7zip/Archive/DeflateProps.cpp",
    "CPP/7zip/Archive/FatHandler.cpp",
    "CPP/7zip/Archive/CpioHandler.cpp",
    "CPP/7zip/Archive/NtfsHandler.cpp",
    "CPP/7zip/Archive/HfsHandler.cpp",
    "CPP/7zip/Archive/QcowHandler.cpp",
    "CPP/7zip/Archive/CramfsHandler.cpp",
    "CPP/7zip/Archive/LpHandler.cpp",
    "CPP/7zip/Archive/VhdxHandler.cpp",
    "CPP/7zip/Archive/Base64Handler.cpp",
    "CPP/7zip/Archive/Bz2Handler.cpp",
    "CPP/7zip/Archive/VdiHandler.cpp",
    "CPP/7zip/Archive/SparseHandler.cpp",
    "CPP/7zip/Archive/MachoHandler.cpp",
    "CPP/7zip/Archive/XarHandler.cpp",
    "CPP/7zip/Archive/XzHandler.cpp",
    "CPP/7zip/Archive/MbrHandler.cpp",
    "CPP/7zip/Archive/Tar/TarOut.cpp",
    "CPP/7zip/Archive/Tar/TarHeader.cpp",
    "CPP/7zip/Archive/Tar/TarRegister.cpp",
    "CPP/7zip/Archive/Tar/TarUpdate.cpp",
    "CPP/7zip/Archive/Tar/TarHandler.cpp",
    "CPP/7zip/Archive/Tar/TarIn.cpp",
    "CPP/7zip/Archive/Tar/TarHandlerOut.cpp",
    "CPP/7zip/Archive/GptHandler.cpp",
    "CPP/7zip/Archive/VmdkHandler.cpp",
    "CPP/7zip/Archive/VhdHandler.cpp",
    "CPP/7zip/Archive/ZHandler.cpp",
    "CPP/7zip/Archive/Udf/UdfHandler.cpp",
    "CPP/7zip/Archive/Udf/UdfIn.cpp",
    "CPP/7zip/Archive/Iso/IsoHeader.cpp",
    "CPP/7zip/Archive/Iso/IsoIn.cpp",
    "CPP/7zip/Archive/Iso/IsoRegister.cpp",
    "CPP/7zip/Archive/Iso/IsoHandler.cpp",
    "CPP/7zip/Archive/Cab/CabRegister.cpp",
    "CPP/7zip/Archive/Cab/CabIn.cpp",
    "CPP/7zip/Archive/Cab/CabHandler.cpp",
    "CPP/7zip/Archive/Cab/CabBlockInStream.cpp",
    "CPP/7zip/Archive/Cab/CabHeader.cpp",
    "CPP/7zip/Archive/Nsis/NsisRegister.cpp",
    "CPP/7zip/Archive/Nsis/NsisHandler.cpp",
    "CPP/7zip/Archive/Nsis/NsisIn.cpp",
    "CPP/7zip/Archive/Nsis/NsisDecode.cpp",
    "CPP/7zip/Archive/Wim/WimHandler.cpp",
    "CPP/7zip/Archive/Wim/WimRegister.cpp",
    "CPP/7zip/Archive/Wim/WimHandlerOut.cpp",
    "CPP/7zip/Archive/Wim/WimIn.cpp",
    "CPP/7zip/Archive/LzhHandler.cpp",
    "CPP/7zip/Archive/ComHandler.cpp",
    "CPP/7zip/Archive/GzHandler.cpp",
    "CPP/7zip/Archive/SwfHandler.cpp",
    "CPP/7zip/Compress/Rar3Vm.cpp",
    "CPP/7zip/Compress/ZDecoder.cpp",
    "CPP/7zip/Compress/LzmaEncoder.cpp",
    "CPP/7zip/Compress/BranchRegister.cpp",
    "CPP/7zip/Compress/QuantumDecoder.cpp",
    "CPP/7zip/Compress/PpmdRegister.cpp",
    "CPP/7zip/Compress/ZlibEncoder.cpp",
    "CPP/7zip/Compress/LzxDecoder.cpp",
    "CPP/7zip/Compress/BitlDecoder.cpp",
    "CPP/7zip/Compress/Deflate64Register.cpp",
    "CPP/7zip/Compress/Rar2Decoder.cpp",
    "CPP/7zip/Compress/DeflateDecoder.cpp",
    "CPP/7zip/Compress/DeflateEncoder.cpp",
    "CPP/7zip/Compress/PpmdZip.cpp",
    "CPP/7zip/Compress/BcjRegister.cpp",
    "CPP/7zip/Compress/PpmdDecoder.cpp",
    "CPP/7zip/Compress/ImplodeDecoder.cpp",
    "CPP/7zip/Compress/Lzma2Decoder.cpp",
    "CPP/7zip/Compress/LzfseDecoder.cpp",
    "CPP/7zip/Compress/ShrinkDecoder.cpp",
    "CPP/7zip/Compress/RarCodecsRegister.cpp",
    "CPP/7zip/Compress/Rar1Decoder.cpp",
    "CPP/7zip/Compress/Rar3Decoder.cpp",
    "CPP/7zip/Compress/XzDecoder.cpp",
    "CPP/7zip/Compress/Lzma2Encoder.cpp",
    "CPP/7zip/Compress/PpmdEncoder.cpp",
    "CPP/7zip/Compress/BZip2Decoder.cpp",
    "CPP/7zip/Compress/LzmsDecoder.cpp",
    "CPP/7zip/Compress/BranchMisc.cpp",
    "CPP/7zip/Compress/BZip2Register.cpp",
    "CPP/7zip/Compress/LzmaDecoder.cpp",
    "CPP/7zip/Compress/LzOutWindow.cpp",
    "CPP/7zip/Compress/Lzma2Register.cpp",
    "CPP/7zip/Compress/LzhDecoder.cpp",
    "CPP/7zip/Compress/LzmaRegister.cpp",
    #"CPP/7zip/Compress/DllExports2Compress.cpp",
    "CPP/7zip/Compress/CopyRegister.cpp",
    "CPP/7zip/Compress/BcjCoder.cpp",
    "CPP/7zip/Compress/BZip2Crc.cpp",
    "CPP/7zip/Compress/Bcj2Register.cpp",
    "CPP/7zip/Compress/ByteSwap.cpp",
    "CPP/7zip/Compress/ZstdDecoder.cpp",
    "CPP/7zip/Compress/XzEncoder.cpp",
    "CPP/7zip/Compress/Rar5Decoder.cpp",
    "CPP/7zip/Compress/XpressDecoder.cpp",
    #"CPP/7zip/Compress/DllExportsCompress.cpp",
    "CPP/7zip/Compress/DeltaFilter.cpp",
    "CPP/7zip/Compress/CopyCoder.cpp",
    "CPP/7zip/Compress/CodecExports.cpp",
    "CPP/7zip/Compress/Bcj2Coder.cpp",
    "CPP/7zip/Compress/ImplodeHuffmanDecoder.cpp",
    "CPP/7zip/Compress/DeflateRegister.cpp",
    "CPP/7zip/Compress/BZip2Encoder.cpp",
    "CPP/7zip/Compress/ZlibDecoder.cpp",
    "CPP/7zip/UI/Common/ArchiveOpenCallback.cpp",
    "CPP/7zip/UI/Common/LoadCodecs.cpp",
    "CPP/7zip/UI/Common/HashCalc.cpp",
    "CPP/7zip/UI/Common/UpdatePair.cpp",
    "CPP/7zip/UI/Common/SortUtils.cpp",
    "CPP/7zip/UI/Common/ExtractingFilePath.cpp",
    "CPP/7zip/UI/Common/OpenArchive.cpp",
    "CPP/7zip/UI/Common/DefaultName.cpp",
    "CPP/7zip/UI/Common/UpdateProduce.cpp",
    "CPP/7zip/UI/Common/Bench.cpp",
    "CPP/7zip/UI/Common/Update.cpp",
    "CPP/7zip/UI/Common/TempFiles.cpp",
    "CPP/7zip/UI/Common/UpdateAction.cpp",
    "CPP/7zip/UI/Common/EnumDirItems.cpp",
    "CPP/7zip/UI/Common/Extract.cpp",
    "CPP/7zip/UI/Common/ArchiveExtractCallback.cpp",
    "CPP/7zip/UI/Common/PropIDUtils.cpp",
    "CPP/7zip/UI/Common/SetProperties.cpp",
    "CPP/7zip/UI/Common/ArchiveCommandLine.cpp",
    "CPP/7zip/UI/Common/UpdateCallback.cpp",
    "CPP/7zip/UI/Console/UpdateCallbackConsole.cpp",
    "CPP/7zip/UI/Console/BenchCon.cpp",
    "CPP/7zip/UI/Console/OpenCallbackConsole.cpp",
    "CPP/7zip/UI/Console/List.cpp",
    "CPP/7zip/UI/Console/PercentPrinter.cpp",
    "CPP/7zip/UI/Console/ExtractCallbackConsole.cpp",
    "CPP/7zip/UI/Console/ConsoleClose.cpp",
    "CPP/7zip/UI/Console/UserInputUtils.cpp",
    "CPP/7zip/UI/Console/Main.cpp",
    "CPP/7zip/UI/Console/HashCon.cpp",
    "CPP/7zip/UI/Console/MainAr.cpp",
    "CPP/7zip/UI/Console/StdAfx.cpp",
]

CPP_7ZIP_HDRS = [
    "CPP/7zip/IProgress.h",
    "CPP/7zip/Common/RegisterCodec.h",
    "CPP/7zip/Common/UniqBlocks.h",
    "CPP/7zip/Common/InBuffer.h",
    "CPP/7zip/Common/StreamBinder.h",
    "CPP/7zip/Common/InOutTempBuffer.h",
    "CPP/7zip/Common/VirtThread.h",
    "CPP/7zip/Common/MultiOutStream.h",
    "CPP/7zip/Common/OutMemStream.h",
    "CPP/7zip/Common/StreamObjects.h",
    "CPP/7zip/Common/ProgressUtils.h",
    "CPP/7zip/Common/StreamUtils.h",
    "CPP/7zip/Common/MethodId.h",
    "CPP/7zip/Common/CWrappers.h",
    "CPP/7zip/Common/ProgressMt.h",
    "CPP/7zip/Common/LimitedStreams.h",
    "CPP/7zip/Common/OffsetStream.h",
    "CPP/7zip/Common/LockedStream.h",
    "CPP/7zip/Common/FilterCoder.h",
    "CPP/7zip/Common/MemBlocks.h",
    "CPP/7zip/Common/RegisterArc.h",
    "CPP/7zip/Common/CreateCoder.h",
    "CPP/7zip/Common/OutBuffer.h",
    "CPP/7zip/Common/StdAfx.h",
    "CPP/7zip/Common/FileStreams.h",
    "CPP/7zip/Common/FilePathAutoRename.h",
    "CPP/7zip/Common/MethodProps.h",
    "CPP/7zip/PropID.h",
    "CPP/7zip/Crypto/Pbkdf2HmacSha1.h",
    "CPP/7zip/Crypto/7zAes.h",
    "CPP/7zip/Crypto/Rar20Crypto.h",
    "CPP/7zip/Crypto/WzAes.h",
    "CPP/7zip/Crypto/ZipStrong.h",
    "CPP/7zip/Crypto/MyAes.h",
    "CPP/7zip/Crypto/HmacSha1.h",
    "CPP/7zip/Crypto/RarAes.h",
    "CPP/7zip/Crypto/Sha1Cls.h",
    "CPP/7zip/Crypto/ZipCrypto.h",
    "CPP/7zip/Crypto/HmacSha256.h",
    "CPP/7zip/Crypto/Rar5Aes.h",
    "CPP/7zip/Crypto/StdAfx.h",
    "CPP/7zip/Crypto/RandGen.h",
    "CPP/7zip/Archive/7z/7zProperties.h",
    "CPP/7zip/Archive/7z/7zOut.h",
    "CPP/7zip/Archive/7z/7zUpdate.h",
    "CPP/7zip/Archive/7z/7zHeader.h",
    "CPP/7zip/Archive/7z/7zCompressionMode.h",
    "CPP/7zip/Archive/7z/7zHandler.h",
    "CPP/7zip/Archive/7z/7zDecode.h",
    "CPP/7zip/Archive/7z/7zEncode.h",
    "CPP/7zip/Archive/7z/7zItem.h",
    "CPP/7zip/Archive/7z/7zFolderInStream.h",
    "CPP/7zip/Archive/7z/7zIn.h",
    "CPP/7zip/Archive/7z/StdAfx.h",
    "CPP/7zip/Archive/7z/7zSpecStream.h",
    "CPP/7zip/Archive/XzHandler.h",
    "CPP/7zip/Archive/HfsHandler.h",
    "CPP/7zip/Archive/Common/HandlerOut.h",
    "CPP/7zip/Archive/Common/DummyOutStream.h",
    "CPP/7zip/Archive/Common/ItemNameUtils.h",
    "CPP/7zip/Archive/Common/ParseProperties.h",
    "CPP/7zip/Archive/Common/MultiStream.h",
    "CPP/7zip/Archive/Common/InStreamWithCRC.h",
    "CPP/7zip/Archive/Common/OutStreamWithCRC.h",
    "CPP/7zip/Archive/Common/OutStreamWithSha1.h",
    "CPP/7zip/Archive/Common/FindSignature.h",
    "CPP/7zip/Archive/Common/StdAfx.h",
    "CPP/7zip/Archive/Common/CoderMixer2.h",
    "CPP/7zip/Archive/Zip/ZipOut.h",
    "CPP/7zip/Archive/Zip/ZipUpdate.h",
    "CPP/7zip/Archive/Zip/ZipAddCommon.h",
    "CPP/7zip/Archive/Zip/ZipCompressionMode.h",
    "CPP/7zip/Archive/Zip/ZipIn.h",
    "CPP/7zip/Archive/Zip/ZipItem.h",
    "CPP/7zip/Archive/Zip/ZipHeader.h",
    "CPP/7zip/Archive/Zip/ZipHandler.h",
    "CPP/7zip/Archive/Zip/StdAfx.h",
    "CPP/7zip/Archive/Chm/ChmIn.h",
    "CPP/7zip/Archive/Chm/ChmHandler.h",
    "CPP/7zip/Archive/Chm/StdAfx.h",
    "CPP/7zip/Archive/Rar/RarItem.h",
    "CPP/7zip/Archive/Rar/RarHandler.h",
    "CPP/7zip/Archive/Rar/RarHeader.h",
    "CPP/7zip/Archive/Rar/RarVol.h",
    "CPP/7zip/Archive/Rar/Rar5Handler.h",
    "CPP/7zip/Archive/Rar/StdAfx.h",
    "CPP/7zip/Archive/IArchive.h",
    "CPP/7zip/Archive/HandlerCont.h",
    "CPP/7zip/Archive/DeflateProps.h",
    "CPP/7zip/Archive/Tar/TarItem.h",
    "CPP/7zip/Archive/Tar/TarHeader.h",
    "CPP/7zip/Archive/Tar/TarUpdate.h",
    "CPP/7zip/Archive/Tar/TarOut.h",
    "CPP/7zip/Archive/Tar/TarHandler.h",
    "CPP/7zip/Archive/Tar/TarIn.h",
    "CPP/7zip/Archive/Tar/StdAfx.h",
    "CPP/7zip/Archive/Udf/UdfIn.h",
    "CPP/7zip/Archive/Udf/StdAfx.h",
    "CPP/7zip/Archive/Udf/UdfHandler.h",
    "CPP/7zip/Archive/Iso/IsoItem.h",
    "CPP/7zip/Archive/Iso/IsoHeader.h",
    "CPP/7zip/Archive/Iso/IsoHandler.h",
    "CPP/7zip/Archive/Iso/StdAfx.h",
    "CPP/7zip/Archive/Iso/IsoIn.h",
    "CPP/7zip/Archive/Cab/CabIn.h",
    "CPP/7zip/Archive/Cab/CabHeader.h",
    "CPP/7zip/Archive/Cab/CabItem.h",
    "CPP/7zip/Archive/Cab/CabBlockInStream.h",
    "CPP/7zip/Archive/Cab/CabHandler.h",
    "CPP/7zip/Archive/Cab/StdAfx.h",
    "CPP/7zip/Archive/Nsis/NsisIn.h",
    "CPP/7zip/Archive/Nsis/NsisHandler.h",
    "CPP/7zip/Archive/Nsis/NsisDecode.h",
    "CPP/7zip/Archive/Nsis/StdAfx.h",
    "CPP/7zip/Archive/Wim/WimHandler.h",
    "CPP/7zip/Archive/Wim/WimIn.h",
    "CPP/7zip/Archive/Wim/StdAfx.h",
    "CPP/7zip/Archive/StdAfx.h",
    "CPP/7zip/Compress/Lzma2Decoder.h",
    "CPP/7zip/Compress/DeflateConst.h",
    "CPP/7zip/Compress/ZlibDecoder.h",
    "CPP/7zip/Compress/BZip2Crc.h",
    "CPP/7zip/Compress/Rar2Decoder.h",
    "CPP/7zip/Compress/Lzma2Encoder.h",
    "CPP/7zip/Compress/Lzx.h",
    "CPP/7zip/Compress/BcjCoder.h",
    "CPP/7zip/Compress/XzDecoder.h",
    "CPP/7zip/Compress/XzEncoder.h",
    "CPP/7zip/Compress/PpmdZip.h",
    "CPP/7zip/Compress/ImplodeHuffmanDecoder.h",
    "CPP/7zip/Compress/ZDecoder.h",
    "CPP/7zip/Compress/Bcj2Coder.h",
    "CPP/7zip/Compress/BitlDecoder.h",
    "CPP/7zip/Compress/LzmsDecoder.h",
    "CPP/7zip/Compress/BranchMisc.h",
    "CPP/7zip/Compress/LzhDecoder.h",
    "CPP/7zip/Compress/BZip2Decoder.h",
    "CPP/7zip/Compress/QuantumDecoder.h",
    "CPP/7zip/Compress/CopyCoder.h",
    "CPP/7zip/Compress/ImplodeDecoder.h",
    "CPP/7zip/Compress/LzfseDecoder.h",
    "CPP/7zip/Compress/LzmaEncoder.h",
    "CPP/7zip/Compress/Mtf8.h",
    "CPP/7zip/Compress/LzxDecoder.h",
    "CPP/7zip/Compress/Rar5Decoder.h",
    "CPP/7zip/Compress/ZlibEncoder.h",
    "CPP/7zip/Compress/LzOutWindow.h",
    "CPP/7zip/Compress/BitmEncoder.h",
    "CPP/7zip/Compress/XpressDecoder.h",
    "CPP/7zip/Compress/Rar1Decoder.h",
    "CPP/7zip/Compress/PpmdDecoder.h",
    "CPP/7zip/Compress/BZip2Encoder.h",
    "CPP/7zip/Compress/DeflateDecoder.h",
    "CPP/7zip/Compress/ShrinkDecoder.h",
    "CPP/7zip/Compress/DeflateEncoder.h",
    "CPP/7zip/Compress/HuffmanDecoder.h",
    "CPP/7zip/Compress/Rar3Vm.h",
    "CPP/7zip/Compress/PpmdEncoder.h",
    "CPP/7zip/Compress/BitlEncoder.h",
    "CPP/7zip/Compress/Rar3Decoder.h",
    "CPP/7zip/Compress/BitmDecoder.h",
    "CPP/7zip/Compress/BZip2Const.h",
    "CPP/7zip/Compress/StdAfx.h",
    "CPP/7zip/Compress/ZstdDecoder.h",
    "CPP/7zip/Compress/LzmaDecoder.h",
    "CPP/7zip/UI/Common/UpdateProduce.h",
    "CPP/7zip/UI/Common/EnumDirItems.h",
    "CPP/7zip/UI/Common/LoadCodecs.h",
    "CPP/7zip/UI/Common/TempFiles.h",
    "CPP/7zip/UI/Common/ExtractMode.h",
    "CPP/7zip/UI/Common/DefaultName.h",
    "CPP/7zip/UI/Common/ArchiveCommandLine.h",
    "CPP/7zip/UI/Common/ExitCode.h",
    "CPP/7zip/UI/Common/Extract.h",
    "CPP/7zip/UI/Common/Property.h",
    "CPP/7zip/UI/Common/SortUtils.h",
    "CPP/7zip/UI/Common/UpdateAction.h",
    "CPP/7zip/UI/Common/HashCalc.h",
    "CPP/7zip/UI/Common/ArchiveOpenCallback.h",
    "CPP/7zip/UI/Common/UpdatePair.h",
    "CPP/7zip/UI/Common/OpenArchive.h",
    "CPP/7zip/UI/Common/ArchiveExtractCallback.h",
    "CPP/7zip/UI/Common/SetProperties.h",
    "CPP/7zip/UI/Common/ExtractingFilePath.h",
    "CPP/7zip/UI/Common/Update.h",
    "CPP/7zip/UI/Common/DirItem.h",
    "CPP/7zip/UI/Common/IFileExtractCallback.h",
    "CPP/7zip/UI/Common/PropIDUtils.h",
    "CPP/7zip/UI/Common/Bench.h",
    "CPP/7zip/UI/Common/UpdateCallback.h",
    "CPP/7zip/UI/Console/ExtractCallbackConsole.h",
    "CPP/7zip/UI/Console/BenchCon.h",
    "CPP/7zip/UI/Console/ConsoleClose.h",
    "CPP/7zip/UI/Console/UserInputUtils.h",
    "CPP/7zip/UI/Console/PercentPrinter.h",
    "CPP/7zip/UI/Console/HashCon.h",
    "CPP/7zip/UI/Console/UpdateCallbackConsole.h",
    "CPP/7zip/UI/Console/OpenCallbackConsole.h",
    "CPP/7zip/UI/Console/List.h",
    "CPP/7zip/UI/Console/StdAfx.h",
    "CPP/7zip/IStream.h",
    "CPP/7zip/ICoder.h",
    "CPP/7zip/IDecl.h",
    "CPP/7zip/MyVersion.h",
    "CPP/7zip/IPassword.h",
]

CPP_WINDOWS_SRCS = [
    "CPP/Windows/PropVariant.cpp",
    "CPP/Windows/FileSystem.cpp",
    "CPP/Windows/PropVariantConv.cpp",
    "CPP/Windows/TimeUtils.cpp",
    "CPP/Windows/SystemInfo.cpp",
    "CPP/Windows/COM.cpp",
    "CPP/Windows/FileIO.cpp",
    "CPP/Windows/FileName.cpp",
    "CPP/Windows/FileLink.cpp",
    "CPP/Windows/System.cpp",
    "CPP/Windows/Synchronization.cpp",
    "CPP/Windows/FileDir.cpp",
    "CPP/Windows/DLL.cpp",
    "CPP/Windows/ErrorMsg.cpp",
    "CPP/Windows/FileFind.cpp",
    "CPP/Windows/PropVariantUtils.cpp",
]

CPP_WINDOWS_HDRS = [
    "CPP/Windows/PropVariantUtils.h",
    "CPP/Windows/NtCheck.h",
    "CPP/Windows/DLL.h",
    "CPP/Windows/FileDir.h",
    "CPP/Windows/Synchronization.h",
    "CPP/Windows/FileSystem.h",
    "CPP/Windows/ProcessUtils.h",
    "CPP/Windows/TimeUtils.h",
    "CPP/Windows/FileFind.h",
    "CPP/Windows/System.h",
    "CPP/Windows/Thread.h",
    "CPP/Windows/PropVariantConv.h",
    "CPP/Windows/FileMapping.h",
    "CPP/Windows/FileName.h",
    "CPP/Windows/ErrorMsg.h",
    "CPP/Windows/Handle.h",
    "CPP/Windows/SystemInfo.h",
    "CPP/Windows/FileIO.h",
    "CPP/Windows/PropVariant.h",
    "CPP/Windows/Registry.h",
    "CPP/Windows/Defs.h",
    "CPP/Windows/MemoryLock.h",
]

CPP_SRCS = CPP_COMMON_SRCS + CPP_7ZIP_SRCS + CPP_WINDOWS_SRCS
CPP_HDRS = CPP_COMMON_HDRS + CPP_7ZIP_HDRS + CPP_WINDOWS_HDRS


cc_binary(
  name = "7za",
  srcs = C_SRCS + CPP_SRCS + C_HDRS + CPP_HDRS,
  includes = [
      "C",
      "CPP",
      "CPP/Common",
      "CPP/Windows",
  ],
  visibility = ["//visibility:public"],
  defines = _7zip_defines,
  copts = [
      "-fexceptions",
  ],
  linkopts = ["-lpthread"],
)
